<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white">
  <!-- Container wrapper -->
  <div class="container-fluid">
    <!-- Navbar brand -->
    <%= link_to root_path, class: "navbar-brand" do %>
      <%= image_tag "logocolor.png", style: "width: 140px" %>
    <% end %>

    <% if user_signed_in? && current_user.flats.count > 0 %>
      <!-- Collapsible wrapper -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <!-- Left links -->
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item <%= "nav-active" if current_page?(preferences_path) %>">
            <%= link_to "My preferences", preferences_path, class: "nav-link" %>
          </li>
          <li class="nav-item <%= "nav-active" if current_page?(chores_path(current_user.flats.first)) %>">
            <%= link_to "My flat's chores", chores_path(current_user.flats.first), class: "nav-link" %>
          </li>
          <li class="nav-item <%= "nav-active" if current_page?(flat_path(current_user.flats.first)) %>">
            <%= link_to "My roommates", flat_path(current_user.flats.first), class: "nav-link" %>
          </li>
          <li class="nav-item <%= "nav-active" if current_page?(chore_list_index_path) %>">
            <%= link_to "My chores", chore_list_index_path, class: "nav-link" %>
          </li>
        </ul>
        <!-- Left links -->
      </div>
      <!-- Collapsible wrapper -->

      <!-- Right elements -->
      <div class="d-flex align-items-center">
        <!-- Avatar -->
        <div class="dropdown">
          <a class="dropdown-toggle d-flex align-items-center caret-off" href="#" id="navbarDropdownMenuAvatar" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <%= render partial: "shared/avatar_small", locals: { user: current_user } %>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuAvatar">
            <li class="nav-item <%= "nav-active-menu" if current_page?(preferences_path) %>">
              <%= link_to "My preferences", preferences_path, class: "dropdown-item" %>
            </li>
            <li class="nav-item <%= "nav-active-menu" if current_page?(chores_path(current_user.flats.first)) %>">
              <%= link_to "My flat's chores", chores_path(current_user.flats.first), class: "dropdown-item" %>
            </li>
            <li class="nav-item <%= "nav-active-menu" if current_page?(flat_path(current_user.flats.first)) %>">
              <%= link_to "My roommates", flat_path(current_user.flats.first), class: "dropdown-item" %>
            </li>
            <li class="nav-item <%= "nav-active-menu" if current_page?(chore_list_index_path) %>">
              <%= link_to "My chores", chore_list_index_path, class: "dropdown-item" %>
            </li>
            <hr class="my-1">
            <li class="nav-item <%= "nav-active-menu" if current_page?(edit_user_registration_path) %>">
              <%= link_to "Edit profile", edit_user_registration_path, class: "dropdown-item" %>
            </li>
            <li class="nav-item <%= "nav-active-menu" if current_page?(destroy_user_session_path) %>">
              <%= link_to "Logout ðŸ‘‹", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
            </li>
          </ul>
        </div>
      </div>
    <!-- Right elements -->
    <% elsif user_signed_in? && current_user.flats.count == 0 %>
      <!-- Right elements -->
      <div class="d-flex align-items-center">
        <!-- Avatar -->
        <div class="dropdown">
            <a class="dropdown-toggle d-flex align-items-center caret-off" href="#" id="navbarDropdownMenuAvatar" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <%= render partial: "shared/avatar_small", locals: { user: current_user } %>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuAvatar">
              <li class="nav-item <%= "nav-active-menu" if current_page?(edit_user_registration_path) %>">
                <%= link_to "Edit profile", edit_user_registration_path, class: "dropdown-item" %>
              </li>
              <li class="nav-item <%= "nav-active-menu" if current_page?(destroy_user_session_path) %>">
                <%= link_to "Logout ðŸ‘‹", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
              </li>
            </ul>
        </div>
      </div>
    <% else %>

    <% end %>
  </div>
  <!-- Container wrapper -->
</nav>
<!-- Navbar -->
